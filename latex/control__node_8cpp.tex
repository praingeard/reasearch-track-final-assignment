\hypertarget{control__node_8cpp}{}\doxysection{src/control\+\_\+node.cpp File Reference}
\label{control__node_8cpp}\index{src/control\_node.cpp@{src/control\_node.cpp}}


Blocks the robot for going to a wall in keyboard mode.  


{\ttfamily \#include \char`\"{}ros/ros.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}sensor\+\_\+msgs/\+Laser\+Scan.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}geometry\+\_\+msgs/\+Twist.\+h\char`\"{}}\newline
{\ttfamily \#include $<$algorithm$>$}\newline
{\ttfamily \#include $<$vector$>$}\newline
{\ttfamily \#include $<$string$>$}\newline
{\ttfamily \#include \char`\"{}std\+\_\+msgs/\+Float64.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}std\+\_\+srvs/\+Empty.\+h\char`\"{}}\newline
Include dependency graph for control\+\_\+node.\+cpp\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{control__node_8cpp__incl}
\end{center}
\end{figure}
\doxysubsection*{Functions}
\begin{DoxyCompactItemize}
\item 
void \mbox{\hyperlink{control__node_8cpp_af638bd5dbf0f700b74601f3d7d55482d}{scan\+Left\+Callback}} (const sensor\+\_\+msgs\+::\+Laser\+Scan \&msg)
\begin{DoxyCompactList}\small\item\em Gets the scan values from left scan range. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{control__node_8cpp_a3e75eda75300ca32fb25fb9379ed721f}{scan\+Right\+Callback}} (const sensor\+\_\+msgs\+::\+Laser\+Scan \&msg)
\begin{DoxyCompactList}\small\item\em Gets the scan values from right scan range. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{control__node_8cpp_aa62740890636d593ffff26d16129bc05}{scan\+Front\+Callback}} (const sensor\+\_\+msgs\+::\+Laser\+Scan \&msg)
\begin{DoxyCompactList}\small\item\em Gets the scan values from front scan range. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{control__node_8cpp_a8798866efcc4c35a36a6eebdd603d3bb}{speed\+Callback}} (const geometry\+\_\+msgs\+::\+Twist \&msg)
\begin{DoxyCompactList}\small\item\em Gets the speed sent by the teleop keyboard. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{control__node_8cpp_a24bdcba66416cef9136ee80eea5281bc}{timer\+Callback}} (const ros\+::\+Timer\+Event \&event)
\begin{DoxyCompactList}\small\item\em Publishes the new speed of the robot. \end{DoxyCompactList}\item 
\mbox{\Hypertarget{control__node_8cpp_a3c04138a5bfe5d72780bb7e82a18e627}\label{control__node_8cpp_a3c04138a5bfe5d72780bb7e82a18e627}} 
int {\bfseries main} (int argc, char $\ast$$\ast$argv)
\end{DoxyCompactItemize}
\doxysubsection*{Variables}
\begin{DoxyCompactItemize}
\item 
\mbox{\Hypertarget{control__node_8cpp_a350594df3e8f6948c8462edfd41ce086}\label{control__node_8cpp_a350594df3e8f6948c8462edfd41ce086}} 
ros\+::\+Publisher {\bfseries pub}
\item 
\mbox{\Hypertarget{control__node_8cpp_a79632cf91f28eb91d84e5c38460b4dab}\label{control__node_8cpp_a79632cf91f28eb91d84e5c38460b4dab}} 
double {\bfseries scan\+\_\+l}
\item 
\mbox{\Hypertarget{control__node_8cpp_a9941563c039f7cd9df0577ad67d0d67e}\label{control__node_8cpp_a9941563c039f7cd9df0577ad67d0d67e}} 
double {\bfseries scan\+\_\+r}
\item 
\mbox{\Hypertarget{control__node_8cpp_abca88f685177528f5af734ca58912478}\label{control__node_8cpp_abca88f685177528f5af734ca58912478}} 
double {\bfseries scan\+\_\+f}
\item 
\mbox{\Hypertarget{control__node_8cpp_ac390b7272c9d710f99f1e1a171dde0a8}\label{control__node_8cpp_ac390b7272c9d710f99f1e1a171dde0a8}} 
double {\bfseries dist\+\_\+stop} = 0.\+5
\item 
\mbox{\Hypertarget{control__node_8cpp_a3af4982f19f5405b756179d40fdd0175}\label{control__node_8cpp_a3af4982f19f5405b756179d40fdd0175}} 
geometry\+\_\+msgs\+::\+Twist {\bfseries speed}
\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}
Blocks the robot for going to a wall in keyboard mode. 

\begin{DoxyAuthor}{Author}
Paul Raingeard de la Blétière 
\end{DoxyAuthor}
\begin{DoxyVersion}{Version}
1.\+0 
\end{DoxyVersion}
\begin{DoxyDate}{Date}
12/03/2022
\end{DoxyDate}
Subscribes to\+: ~\newline
 ° /right\+\_\+scan ° /left\+\_\+scan ° /front\+\_\+scan ° /cmd\+\_\+vel

Publishes to\+: ~\newline
 ° /cmd\+\_\+vel

Description \+:

This node publishes the desired twist of the robot on the /cmd\+\_\+vel topic by correcting the one given by the teleop\+\_\+twist\+\_\+keyboard. 

\doxysubsection{Function Documentation}
\mbox{\Hypertarget{control__node_8cpp_aa62740890636d593ffff26d16129bc05}\label{control__node_8cpp_aa62740890636d593ffff26d16129bc05}} 
\index{control\_node.cpp@{control\_node.cpp}!scanFrontCallback@{scanFrontCallback}}
\index{scanFrontCallback@{scanFrontCallback}!control\_node.cpp@{control\_node.cpp}}
\doxysubsubsection{\texorpdfstring{scanFrontCallback()}{scanFrontCallback()}}
{\footnotesize\ttfamily void scan\+Front\+Callback (\begin{DoxyParamCaption}\item[{const sensor\+\_\+msgs\+::\+Laser\+Scan \&}]{msg }\end{DoxyParamCaption})}



Gets the scan values from front scan range. 


\begin{DoxyParams}{Parameters}
{\em msg} & received Laser\+Scan msg.\\
\hline
\end{DoxyParams}
Gets the minimal range from the front scan message and adds it to the scan\+\_\+f variable. \mbox{\Hypertarget{control__node_8cpp_af638bd5dbf0f700b74601f3d7d55482d}\label{control__node_8cpp_af638bd5dbf0f700b74601f3d7d55482d}} 
\index{control\_node.cpp@{control\_node.cpp}!scanLeftCallback@{scanLeftCallback}}
\index{scanLeftCallback@{scanLeftCallback}!control\_node.cpp@{control\_node.cpp}}
\doxysubsubsection{\texorpdfstring{scanLeftCallback()}{scanLeftCallback()}}
{\footnotesize\ttfamily void scan\+Left\+Callback (\begin{DoxyParamCaption}\item[{const sensor\+\_\+msgs\+::\+Laser\+Scan \&}]{msg }\end{DoxyParamCaption})}



Gets the scan values from left scan range. 


\begin{DoxyParams}{Parameters}
{\em msg} & received Laser\+Scan msg.\\
\hline
\end{DoxyParams}
Gets the minimal range from the left scan message and adds it to the scan\+\_\+l variable. \mbox{\Hypertarget{control__node_8cpp_a3e75eda75300ca32fb25fb9379ed721f}\label{control__node_8cpp_a3e75eda75300ca32fb25fb9379ed721f}} 
\index{control\_node.cpp@{control\_node.cpp}!scanRightCallback@{scanRightCallback}}
\index{scanRightCallback@{scanRightCallback}!control\_node.cpp@{control\_node.cpp}}
\doxysubsubsection{\texorpdfstring{scanRightCallback()}{scanRightCallback()}}
{\footnotesize\ttfamily void scan\+Right\+Callback (\begin{DoxyParamCaption}\item[{const sensor\+\_\+msgs\+::\+Laser\+Scan \&}]{msg }\end{DoxyParamCaption})}



Gets the scan values from right scan range. 


\begin{DoxyParams}{Parameters}
{\em msg} & received Laser\+Scan msg.\\
\hline
\end{DoxyParams}
Gets the minimal range from the right scan message and adds it to the scan\+\_\+r variable. \mbox{\Hypertarget{control__node_8cpp_a8798866efcc4c35a36a6eebdd603d3bb}\label{control__node_8cpp_a8798866efcc4c35a36a6eebdd603d3bb}} 
\index{control\_node.cpp@{control\_node.cpp}!speedCallback@{speedCallback}}
\index{speedCallback@{speedCallback}!control\_node.cpp@{control\_node.cpp}}
\doxysubsubsection{\texorpdfstring{speedCallback()}{speedCallback()}}
{\footnotesize\ttfamily void speed\+Callback (\begin{DoxyParamCaption}\item[{const geometry\+\_\+msgs\+::\+Twist \&}]{msg }\end{DoxyParamCaption})}



Gets the speed sent by the teleop keyboard. 


\begin{DoxyParams}{Parameters}
{\em msg} & received Twist.\\
\hline
\end{DoxyParams}
Gets the Twist sent by the teleop\+\_\+keyboard and adds it to the speed variable. \mbox{\Hypertarget{control__node_8cpp_a24bdcba66416cef9136ee80eea5281bc}\label{control__node_8cpp_a24bdcba66416cef9136ee80eea5281bc}} 
\index{control\_node.cpp@{control\_node.cpp}!timerCallback@{timerCallback}}
\index{timerCallback@{timerCallback}!control\_node.cpp@{control\_node.cpp}}
\doxysubsubsection{\texorpdfstring{timerCallback()}{timerCallback()}}
{\footnotesize\ttfamily void timer\+Callback (\begin{DoxyParamCaption}\item[{const ros\+::\+Timer\+Event \&}]{event }\end{DoxyParamCaption})}



Publishes the new speed of the robot. 


\begin{DoxyParams}{Parameters}
{\em event} & R\+OS Timer variable.\\
\hline
\end{DoxyParams}
Checks the position of the robot from the wall using the Laser\+Scan minimum ranges. Sets the linear or angular speed to 0 if needed. 